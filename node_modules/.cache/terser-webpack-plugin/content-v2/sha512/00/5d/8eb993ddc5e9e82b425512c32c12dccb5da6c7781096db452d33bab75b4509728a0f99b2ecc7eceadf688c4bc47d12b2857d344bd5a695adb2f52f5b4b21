{"map":"{\"version\":3,\"sources\":[\"js/app.6f68179a.js\"],\"names\":[\"modules\",\"webpackJsonpCallback\",\"data\",\"moduleId\",\"chunkId\",\"chunkIds\",\"moreModules\",\"executeModules\",\"i\",\"resolves\",\"length\",\"Object\",\"prototype\",\"hasOwnProperty\",\"call\",\"installedChunks\",\"push\",\"parentJsonpFunction\",\"shift\",\"deferredModules\",\"apply\",\"checkDeferredModules\",\"result\",\"deferredModule\",\"fulfilled\",\"j\",\"depId\",\"splice\",\"__webpack_require__\",\"s\",\"installedModules\",\"app\",\"exports\",\"module\",\"l\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"p\",\"jsonpArray\",\"window\",\"oldJsonpFunction\",\"slice\",\"0\",\"1\",\"2\",\"3\",\"4\",\"4d75\",\"5\",\"56d7\",\"__webpack_exports__\",\"vue_runtime_esm\",\"Appvue_type_template_id_4ff50c0b_render\",\"_vm\",\"this\",\"_h\",\"$createElement\",\"_c\",\"_self\",\"attrs\",\"id\",\"staticClass\",\"ref\",\"width\",\"worldWidth\",\"height\",\"worldHeight\",\"car\",\"viewSize\",\"reducedViewSize\",\"_v\",\"_s\",\"fps\",\"staticRenderFns\",\"toConsumableArray\",\"asyncToGenerator\",\"tf\",\"Appvue_type_script_lang_js_\",\"ctx\",\"imgWorld\",\"worldLoaded\",\"fpsCounter\",\"tick\",\"tickTime\",\"x\",\"y\",\"speed\",\"steeringSpeed\",\"angle\",\"viewReduction\",\"viewReducedSize\",\"viewPixels\",\"steering\",\"samples\",\"training\",\"model\",\"computed\",\"reducedSize\",\"mounted\",\"$refs\",\"canvas\",\"getContext\",\"Image\",\"src\",\"onload\",\"document\",\"addEventListener\",\"keyDown\",\"keyUp\",\"ctxViewSnapshot\",\"viewSnapshotCanvas\",\"ctxCarSnapshot\",\"carSnapshotCanvas\",\"ctxCar\",\"carCanvas\",\"ctxView\",\"viewCanvas\",\"ctxViewReduced\",\"viewCanvasReduced\",\"console\",\"log\",\"sequential\",\"add\",\"layers\",\"dense\",\"inputShape\",\"activation\",\"units\",\"compile\",\"loss\",\"optimizer\",\"train\",\"rmsprop\",\"metrics\",\"refreshLoop\",\"methods\",\"_this\",\"regeneratorRuntime\",\"mark\",\"_callee\",\"featureValuesTraining\",\"labelValuesTraining\",\"featureValueTraining\",\"featureTensorTraining\",\"labelTensorTraining\",\"wrap\",\"_context\",\"prev\",\"next\",\"state\",\"reward\",\"action\",\"tensor2d\",\"trainModel\",\"stop\",\"_this2\",\"_callee2\",\"epochs\",\"_context2\",\"abrupt\",\"fit\",\"callbacks\",\"onEpochEnd\",\"epoch\",\"onTrainEnd\",\"predict\",\"input\",\"_this3\",\"_callee3\",\"_context3\",\"tidy\",\"inputTensor\",\"outputTensor\",\"outputValue\",\"dataSync\",\"getSteering\",\"_this4\",\"_callee4\",\"_context4\",\"testingDataInput\",\"prediction\",\"sent\",\"Math\",\"max\",\"_this5\",\"requestAnimationFrame\",\"now\",\"performance\",\"enterFrame\",\"drawWorld\",\"getView\",\"moveCar\",\"then\",\"min\",\"randomisedValue\",\"random\",\"steeringStrength\",\"_steeringStrength\",\"sin\",\"cos\",\"checkCarCollision\",\"viewX\",\"viewY\",\"snapshotWhereViewIs\",\"getImageData\",\"viewSnapshotPixels\",\"g\",\"b\",\"save\",\"clearRect\",\"translate\",\"rotate\",\"pixelIndex\",\"color\",\"rgbToHex\",\"fillStyle\",\"fillRect\",\"restore\",\"imgWhereViewIs\",\"putImageData\",\"_i\",\"_r\",\"_g\",\"_b\",\"previousTotalBrightness\",\"viewPixelsReduced\",\"_i2\",\"reducePixels\",\"sqrt\",\"_y\",\"_x\",\"_pixelIndex\",\"_color\",\"unshift\",\"totalBrightness\",\"_i3\",\"brightness\",\"brightnessChange\",\"snapshotWhereCarIs\",\"carSnapshotPixels\",\"imgWhereCarIs\",\"drawCarAndViewSquare\",\"totalR\",\"totalG\",\"totalB\",\"_i4\",\"round\",\"undefined\",\"resetCar\",\"strokeStyle\",\"beginPath\",\"rect\",\"stroke\",\"componentToHex\",\"hex\",\"toString\",\"pixels\",\"size\",\"pixelsReduced\",\"pixelIndexes\",\"drawImage\",\"src_Appvue_type_script_lang_js_\",\"componentNormalizer\",\"component\",\"App\",\"config\",\"productionTip\",\"render\",\"h\",\"$mount\",\"5c0b\",\"6\",\"7\",\"8\",\"9c0c\"],\"mappings\":\"CAAS,SAAUA,GAET,SAASC,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDH,EAAQG,GAAYG,EAAYH,IAG/Bc,GAAqBA,EAAoBf,GAE5C,MAAMO,EAASC,OACdD,EAASS,OAATT,GAOD,OAHAU,EAAgBH,KAAKI,MAAMD,EAAiBZ,GAAkB,IAGvDc,IAER,SAASA,IAER,IADA,IAAIC,EACId,EAAI,EAAGA,EAAIW,EAAgBT,OAAQF,IAAK,CAG/C,IAFA,IAAIe,EAAiBJ,EAAgBX,GACjCgB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAeb,OAAQe,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BV,EAAgBW,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOnB,IAAK,GAC5Bc,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBf,EAAkB,CACrBgB,IAAO,GAGJZ,EAAkB,GAGtB,SAASS,EAAoBzB,GAG5B,GAAG2B,EAAiB3B,GACnB,OAAO2B,EAAiB3B,GAAU6B,QAGnC,IAAIC,EAASH,EAAiB3B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAhC,EAAQG,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASJ,GAG/DK,EAAOC,GAAI,EAGJD,EAAOD,QAKfJ,EAAoBO,EAAInC,EAGxB4B,EAAoBQ,EAAIN,EAGxBF,EAAoBS,EAAI,SAASL,EAASM,EAAMC,GAC3CX,EAAoBY,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEX,EAAoBgB,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBS,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAL,EAAoBS,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRX,EAAoBY,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG7B,EAAoB8B,EAAI,IAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIS,EAAsB4C,EAI1B1C,EAAgBH,KAAK,CAAC,EAAE,kBAEjBK,KAxJR,CA2JC,CAEJ0C,EACA,SAAU9B,EAAQD,EAASJ,GAEjCK,EAAOD,QAAUJ,EAAoB,SAK/BoC,EACA,SAAU/B,EAAQD,KAMlBiC,EACA,SAAUhC,EAAQD,KAMlBkC,EACA,SAAUjC,EAAQD,KAMlBmC,EACA,SAAUlC,EAAQD,KAMlBoC,OACA,SAAUnC,EAAQD,EAASJ,GAEjCK,EAAOD,QAAUJ,EAAoB8B,EAAI,0BAInCW,EACA,SAAUpC,EAAQD,KAMlBsC,OACA,SAAUrC,EAAQsC,EAAqB3C,GAE7C,aAEAA,EAAoBgB,EAAE2B,GAGE3C,EAAoB,QAG3BA,EAAoB,QAGdA,EAAoB,QAGlBA,EAAoB,QAT7C,IAYI4C,EAAkB5C,EAAoB,QAGtC6C,EAA0C,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAACC,GAAK,QAAQ,CAACH,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,SAAS,CAACK,IAAI,SAASH,MAAM,CAACI,MAAQV,EAAIW,WAAWC,OAASZ,EAAIa,iBAAiBT,EAAG,SAAS,CAACK,IAAI,oBAAoBD,YAAY,sBAAsBF,MAAM,CAACI,MAAuB,IAAfV,EAAIc,IAAI9E,OAAW4E,OAAwB,IAAfZ,EAAIc,IAAI9E,UAAcoE,EAAG,SAAS,CAACK,IAAI,qBAAqBD,YAAY,uBAAuBF,MAAM,CAACI,MAAqB,IAAbV,EAAIe,SAAaH,OAAsB,IAAbZ,EAAIe,YAAgBX,EAAG,SAAS,CAACK,IAAI,YAAYD,YAAY,aAAaF,MAAM,CAACI,MAAQV,EAAIc,IAAIJ,MAAME,OAASZ,EAAIc,IAAI9E,UAAUoE,EAAG,SAAS,CAACK,IAAI,aAAaD,YAAY,cAAcF,MAAM,CAACI,MAAQV,EAAIe,SAASH,OAASZ,EAAIe,YAAYX,EAAG,SAAS,CAACK,IAAI,oBAAoBD,YAAY,sBAAsBF,MAAM,CAACI,MAAQV,EAAIgB,gBAAgBJ,OAASZ,EAAIgB,mBAAmBZ,EAAG,OAAO,CAACI,YAAY,OAAO,CAACR,EAAIiB,GAAGjB,EAAIkB,GAAGlB,EAAImB,KAAK,aAC37BC,EAAkB,GAMlBC,EAAoBnE,EAAoB,QAGxCoE,EAAmBpE,EAAoB,QAoCvCqE,GAjCiBrE,EAAoB,QAGfA,EAAoB,QAGpBA,EAAoB,QAGhCA,EAAoB,QAwBzBA,EAAoB,SAEIsE,EAA8B,CAC7D5D,KAAM,MACNpC,KAAM,WACJ,MAAO,CACLiG,IAAK,KACLd,WAAY,IACZE,YAAa,IACba,SAAU,KACVC,aAAa,EACbR,IAAK,KACLS,WAAY,KACZC,MAAM,EACNC,SAAU,KACVhB,IAAK,CACHJ,MAAO,EACP1E,OAAQ,GACR+F,EAAG,OACHC,EAAG,IACHC,MAAO,EACPC,cAAe,KACfC,MAAO,GAETpB,SAAU,GACVqB,cAAe,EACfC,gBAAiB,KACjBC,WAAY,KACZC,SAAU,KACVC,QAAS,GACTC,UAAU,EACVC,MAAO,OAGXC,SAAU,CACR3B,gBAAiB,WAGf,IAFA,IAAI4B,EAAc3C,KAAKc,SAEdjF,EAAI,EAAGA,EAAImE,KAAKmC,cAAetG,IACtC8G,GAA4B,EAG9B,OAAOA,IAGXC,QAAS,WACP5C,KAAKwB,IAAMxB,KAAK6C,MAAMC,OAAOC,WAAW,MACxC/C,KAAKyB,SAAW,IAAIuB,MAAMhD,KAAKU,WAAYV,KAAKY,aAChDZ,KAAKyB,SAASwB,IAAMhG,EAAoB,QACxC,IAAIG,EAAM4C,KAEVA,KAAKyB,SAASyB,OAAS,WACrB9F,EAAIsE,aAAc,GAGpByB,SAASC,iBAAiB,UAAWpD,KAAKqD,SAC1CF,SAASC,iBAAiB,QAASpD,KAAKsD,OACxCtD,KAAKuD,gBAAkBvD,KAAK6C,MAAMW,mBAAmBT,WAAW,MAChE/C,KAAKyD,eAAiBzD,KAAK6C,MAAMa,kBAAkBX,WAAW,MAC9D/C,KAAK2D,OAAS3D,KAAK6C,MAAMe,UAAUb,WAAW,MAC9C/C,KAAK6D,QAAU7D,KAAK6C,MAAMiB,WAAWf,WAAW,MAChD/C,KAAK+D,eAAiB/D,KAAK6C,MAAMmB,kBAAkBjB,WAAW,MAC9DkB,QAAQC,IAAI,sBACZlE,KAAKoC,gBAAkBpC,KAAKc,SAE5B,IAAK,IAAIjF,EAAI,EAAGA,EAAImE,KAAKmC,cAAetG,IACtCmE,KAAKoC,gBAAkBpC,KAAKoC,gBAAkB,EAGhDpC,KAAKyC,MAAQnB,EAAG6C,aAChBnE,KAAKyC,MAAM2B,IAAI9C,EAAG+C,OAAOC,MAAM,CAC7BC,WAAYvE,KAAKoC,gBAAkBpC,KAAKoC,gBAAkB,EAC1DoC,WAAY,UACZC,MAAO,KAETzE,KAAKyC,MAAM2B,IAAI9C,EAAG+C,OAAOC,MAAM,CAC7BE,WAAY,OACZC,MAAO,MAETzE,KAAKyC,MAAM2B,IAAI9C,EAAG+C,OAAOC,MAAM,CAC7BE,WAAY,UACZC,MAAO,KAGTzE,KAAKyC,MAAMiC,QAAQ,CACjBC,KAAM,qBACNC,UAAWtD,EAAGuD,MAAMC,QAAQ,IAC5BC,QAAS,CAAC,cAGZ/E,KAAKgF,eAEPC,QAAS,CACPJ,MAAO,WACL,IAAIK,EAAQlF,KAEZ,OAAOhE,OAAOqF,EAAiB,KAAxBrF,CAA0DmJ,mBAAmBC,MAAK,SAASC,IAChG,IAAIC,EAAuBC,EAAqB1J,EAAG2J,EAAsBC,EAAuBC,EAChG,OAAOP,mBAAmBQ,MAAK,SAAkBC,GAC/C,MAAO,EACL,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAMH,IALAZ,EAAM1C,UAAW,EACjByB,QAAQC,IAAI,YAAcgB,EAAM3C,QAAQxG,QACxCuJ,EAAwB,GACxBC,EAAsB,GAEjB1J,EAAI,EAAGA,EAAIqJ,EAAM3C,QAAQxG,OAAQF,IACpC2J,EAAuBN,EAAM3C,QAAQ1G,GAAGkK,MACxCP,EAAqBnJ,KAAK6I,EAAM3C,QAAQ1G,GAAGmK,QAC3CV,EAAsBjJ,KAAKmJ,GAC3BD,EAAoBlJ,KAAK6I,EAAM3C,QAAQ1G,GAAGoK,QAO5C,OAJAR,EAAwBnE,EAAG4E,SAASZ,EAAuB,CAACA,EAAsBvJ,OAAQuJ,EAAsB,GAAGvJ,SACnH2J,EAAsBpE,EAAG4E,SAASX,EAAqB,CAACA,EAAoBxJ,OAAQ,IACpFkI,QAAQC,IAAI,mBACZ0B,EAASE,KAAO,GACTZ,EAAMiB,WAAWV,EAAuBC,GAEjD,KAAK,GACHR,EAAM3C,QAAU,GAChB2C,EAAM1C,UAAW,EAEnB,KAAK,GACL,IAAK,MACH,OAAOoD,EAASQ,UAGrBf,MAjCErJ,IAoCTmK,WAAY,SAAoBV,EAAuBC,GACrD,IAAIW,EAASrG,KAEb,OAAOhE,OAAOqF,EAAiB,KAAxBrF,CAA0DmJ,mBAAmBC,MAAK,SAASkB,IAChG,IAAIC,EACJ,OAAOpB,mBAAmBQ,MAAK,SAAmBa,GAChD,MAAO,EACL,OAAQA,EAAUX,KAAOW,EAAUV,MACjC,KAAK,EAEH,OADAS,EAASF,EAAO9D,QAAQxG,OACjByK,EAAUC,OAAO,SAAUJ,EAAO5D,MAAMiE,IAAIjB,EAAuBC,EAAqB,CAC7Fa,OAAQA,EAERI,UAAW,CACTC,WAAY,SAAoBC,GAE9B5C,QAAQC,IAAI2C,EAAQ,OAASN,IAE/BO,WAAY,WACV7C,QAAQC,IAAI,aAKpB,KAAK,EACL,IAAK,MACH,OAAOsC,EAAUJ,UAGtBE,MA1BEtK,IA6BT+K,QAAS,SAAiBC,GACxB,IAAIC,EAASjH,KAEb,OAAOhE,OAAOqF,EAAiB,KAAxBrF,CAA0DmJ,mBAAmBC,MAAK,SAAS8B,IAChG,OAAO/B,mBAAmBQ,MAAK,SAAmBwB,GAChD,MAAO,EACL,OAAQA,EAAUtB,KAAOsB,EAAUrB,MACjC,KAAK,EACH,OAAOqB,EAAUV,OAAO,SAAUnF,EAAG8F,MAAK,WACxC,IAAIC,EAAc/F,EAAG4E,SAAS,CAACc,GAAQ,CAAC,EAAGC,EAAO7E,gBAAkB6E,EAAO7E,gBAAkB,IAEzFkF,EAAeL,EAAOxE,MAAMsE,QAAQM,GAEpCE,EAAcD,EAAaE,WAC/B,OAAOD,MAGX,KAAK,EACL,IAAK,MACH,OAAOJ,EAAUf,UAGtBc,MAnBElL,IAsBTyL,YAAa,WACX,IAAIC,EAAS1H,KAEb,OAAOhE,OAAOqF,EAAiB,KAAxBrF,CAA0DmJ,mBAAmBC,MAAK,SAASuC,IAChG,OAAOxC,mBAAmBQ,MAAK,SAAmBiC,GAChD,MAAO,EACL,OAAQA,EAAU/B,KAAO+B,EAAU9B,MACjC,KAAK,EAEH,OADA8B,EAAU9B,KAAO,EACV4B,EAAOX,QAAQW,EAAOG,kBAE/B,KAAK,EAGH,OAFAH,EAAOI,WAAaF,EAAUG,KAC9BL,EAAOI,WAAaE,KAAKC,IAAI,EAAGP,EAAOI,YAChCF,EAAUnB,OAAO,SAAUiB,EAAOI,YAE3C,KAAK,EACL,IAAK,MACH,OAAOF,EAAUxB,UAGtBuB,MAlBE3L,IAqBTgJ,YAAa,WACX,IAAIkD,EAASlI,KAEbf,OAAOkJ,uBAAsB,WAC3B,IAAIC,EAAMC,YAAYD,MAElBF,EAAOtG,MACTsG,EAAOrG,SAAWuG,EAClBF,EAAOhH,IAAMgH,EAAOvG,WACpBuG,EAAOvG,WAAa,EACpBuG,EAAOtG,MAAO,IAEdsG,EAAOvG,aAEHyG,GAAOF,EAAOrG,SAAW,MAC3BqG,EAAOtG,MAAO,IAIlBsG,EAAOI,aAEPJ,EAAOlD,kBAGXsD,WAAY,WACNtI,KAAK0B,cAAgB1B,KAAKwC,WAC5BxC,KAAKuI,YACLvI,KAAKwI,UACLxI,KAAKyI,YAGTA,QAAS,WACPzI,KAAK6H,iBAAmB7L,OAAOoF,EAAkB,KAAzBpF,CAA6CgE,KAAKqC,YAC1ErC,KAAK6H,iBAAiBxL,KAAK,GAC3B,IAAImE,EAAMR,KACVA,KAAKyH,cAAciB,MAAK,SAAUtK,GAMhC,GAJAA,EAAQ4J,KAAKW,IAAIvK,EAAO,GACxBA,EAAQ4J,KAAKC,IAAI7J,EAAO,GACxB6F,QAAQC,IAAI,iCAAmC9F,GAE3CoC,EAAI+B,QAAQxG,QAAUyE,EAAI+B,QAAQ,GAAGyD,OAAS,GAAK,CACrD/B,QAAQC,IAAI,eAAiB1D,EAAI+B,QAAQ,GAAGyD,QAI5C,IAAI4C,EAAkBxK,EAAQ,EAAoB,EAAhB4J,KAAKa,SACvCD,EAAkBZ,KAAKW,IAAIC,EAAiB,GAC5CA,EAAkBZ,KAAKC,IAAIW,EAAiB,GAC5CpI,EAAIK,IAAIyB,SAAWsG,EACnB3E,QAAQC,IAAI,cAAgB0E,QAE5BpI,EAAIK,IAAIyB,SAAWlE,EAGrB,GAAIoC,EAAIK,IAAIyB,SAAW,GAAK,CAE1B,IAAIwG,EAA8C,GAA1B,GAAMtI,EAAIK,IAAIyB,UACtC9B,EAAIK,IAAIqB,OAAS1B,EAAIK,IAAIoB,cAAgB6G,OACpC,GAAItI,EAAIK,IAAIyB,SAAW,GAAK,CAEjC,IAAIyG,EAA+C,GAA1BvI,EAAIK,IAAIyB,SAAW,IAE5C9B,EAAIK,IAAIqB,OAAS1B,EAAIK,IAAIoB,cAAgB8G,EAG3CvI,EAAIK,IAAIiB,GAAKkG,KAAKgB,IAAIxI,EAAIK,IAAIqB,OAAS1B,EAAIK,IAAImB,MAC/CxB,EAAIK,IAAIkB,GAAKiG,KAAKiB,IAAIzI,EAAIK,IAAIqB,OAAS1B,EAAIK,IAAImB,MAC/CxB,EAAI0I,wBAGRV,QAAS,WAEPxI,KAAKa,IAAIsI,MAAQnJ,KAAKa,IAAIiB,EAAIkG,KAAKgB,IAAIhJ,KAAKa,IAAIqB,QAAUlC,KAAKa,IAAI9E,OAAS,EAAIiE,KAAKc,SAAW,GAChGd,KAAKa,IAAIuI,MAAQpJ,KAAKa,IAAIkB,EAAIiG,KAAKiB,IAAIjJ,KAAKa,IAAIqB,QAAUlC,KAAKa,IAAI9E,OAAS,EAAIiE,KAAKc,SAAW,GAEhGd,KAAKqJ,oBAAsBrJ,KAAKwB,IAAI8H,aAAatJ,KAAKa,IAAIsI,MAAQnJ,KAAKuD,gBAAgBT,OAAOrC,MAAQ,EAAGT,KAAKa,IAAIuI,MAAQpJ,KAAKuD,gBAAgBT,OAAOnC,OAAS,EAAGX,KAAKuD,gBAAgBT,OAAOrC,MAAOT,KAAKuD,gBAAgBT,OAAOnC,QAIjO,IAFA,IAAI4I,EAAqB,GAEhB1N,EAAI,EAAGA,EAAImE,KAAKqJ,oBAAoB9N,KAAKQ,OAAQF,GAAK,EAAG,CAChE,IAAIoC,EAAI+B,KAAKqJ,oBAAoB9N,KAAKM,GAClC2N,EAAIxJ,KAAKqJ,oBAAoB9N,KAAKM,EAAI,GACtC4N,EAAIzJ,KAAKqJ,oBAAoB9N,KAAKM,EAAI,GAC1C0N,EAAmBlN,KAAK,CAAC4B,EAAGuL,EAAGC,IAIjCzJ,KAAKuD,gBAAgBmG,OACrB1J,KAAKuD,gBAAgBoG,UAAU,EAAG,EAAG3J,KAAKuD,gBAAgBT,OAAOrC,MAAOT,KAAKuD,gBAAgBT,OAAOnC,QACpGX,KAAKuD,gBAAgBqG,UAAU5J,KAAKuD,gBAAgBT,OAAOrC,MAAQ,EAAGT,KAAKuD,gBAAgBT,OAAOnC,OAAS,GAC3GX,KAAKuD,gBAAgBsG,QAAQ7J,KAAKa,IAAIqB,OACtClC,KAAKuD,gBAAgBqG,WAAW5J,KAAKuD,gBAAgBT,OAAOrC,MAAQ,GAAIT,KAAKuD,gBAAgBT,OAAOnC,OAAS,GAE7G,IAAK,IAAIoB,EAAI,EAAGA,EAAI/B,KAAKuD,gBAAgBT,OAAOnC,OAAQoB,IACtD,IAAK,IAAID,EAAI,EAAGA,EAAI9B,KAAKuD,gBAAgBT,OAAOrC,MAAOqB,IAAK,CAC1D,IAAIgI,EAAa/H,EAAI/B,KAAKuD,gBAAgBT,OAAOrC,MAAQqB,EACrDiI,EAAQ/J,KAAKgK,SAAST,EAAmBO,GAAY,GAAIP,EAAmBO,GAAY,GAAIP,EAAmBO,GAAY,IAC/H9J,KAAKuD,gBAAgB0G,UAAYF,EACjC/J,KAAKuD,gBAAgB2G,SAASpI,EAAGC,EAAG,IAAK,KAI7C/B,KAAKuD,gBAAgB4G,UAErBnK,KAAKoK,eAAiBpK,KAAKuD,gBAAgB+F,aAAatJ,KAAKuD,gBAAgBT,OAAOrC,MAAQ,EAAIT,KAAK6D,QAAQf,OAAOrC,MAAQ,EAAGT,KAAKuD,gBAAgBT,OAAOnC,OAAS,EAAIX,KAAK6D,QAAQf,OAAOnC,OAAS,EAAGX,KAAK6D,QAAQf,OAAOrC,MAAOT,KAAK6D,QAAQf,OAAOnC,QACvPX,KAAK6D,QAAQwG,aAAarK,KAAKoK,eAAgB,EAAG,GAIlD,IAFA,IAAI/H,EAAa,GAERiI,EAAK,EAAGA,EAAKtK,KAAKoK,eAAe7O,KAAKQ,OAAQuO,GAAM,EAAG,CAC9D,IAAIC,EAAKvK,KAAKoK,eAAe7O,KAAK+O,GAC9BE,EAAKxK,KAAKoK,eAAe7O,KAAK+O,EAAK,GACnCG,EAAKzK,KAAKoK,eAAe7O,KAAK+O,EAAK,GACvCjI,EAAWhG,KAAK,CAACkO,EAAIC,EAAIC,IAK3B,IAFA,IAkBIC,EAlBAC,EAAoBtI,EAEfuI,EAAM,EAAGA,EAAM5K,KAAKmC,cAAeyI,IAC1CD,EAAoB3K,KAAK6K,aAAaF,EAAmB3C,KAAK8C,KAAKH,EAAkB5O,SAIvF,IAAK,IAAIgP,EAAK,EAAGA,EAAK/K,KAAK+D,eAAejB,OAAOnC,OAAQoK,IACvD,IAAK,IAAIC,EAAK,EAAGA,EAAKhL,KAAK+D,eAAejB,OAAOrC,MAAOuK,IAAM,CAC5D,IAAIC,EAAcF,EAAK/K,KAAK+D,eAAejB,OAAOrC,MAAQuK,EAEtDE,EAASlL,KAAKgK,SAASW,EAAkBM,GAAa,GAAIN,EAAkBM,GAAa,GAAIN,EAAkBM,GAAa,IAEhIjL,KAAK+D,eAAekG,UAAYiB,EAChClL,KAAK+D,eAAemG,SAASc,EAAID,EAAI,IAAK,KAM1C/K,KAAKqC,aAEPrC,KAAKuC,QAAQ4I,QAAQ,CACnBpF,MAAO/F,KAAKqC,WACZ4D,OAAQjG,KAAKa,IAAIyB,WAEnBtC,KAAKuC,QAAUvC,KAAKuC,QAAQpD,MAAM,EAAG,MACrCuL,EAA0B1K,KAAKoL,iBAIjCpL,KAAKqC,WAAa,GAClBrC,KAAKoL,gBAAkB,EAEvB,IAAK,IAAIC,EAAM,EAAGA,EAAMV,EAAkB5O,OAAQsP,IAAO,CACvD,IAAIC,GAAcX,EAAkBU,GAAK,GAAKV,EAAkBU,GAAK,GAAKV,EAAkBU,GAAK,IAAM,IACvGrL,KAAKqC,WAAWhG,KAAKiP,GACrBtL,KAAKoL,iBAAmBE,EAK1B,GAFAtL,KAAKoL,gBAAkBpL,KAAKoL,gBAAkBpL,KAAKqC,WAAWtG,OAE1DiE,KAAKuC,QAAQxG,OAAQ,CACvB,IACIiK,EADAuF,EAAmBvL,KAAKoL,gBAAkBV,EAM5C1E,EAHEuF,EAAmB,EAGZ,EAIA,EAGXvL,KAAKuC,QAAQ,GAAGyD,OAASA,IAG7BkD,kBAAmB,WAEjBlJ,KAAKwL,mBAAqBxL,KAAKwB,IAAI8H,aAAatJ,KAAKa,IAAIiB,EAAI9B,KAAKyD,eAAeX,OAAOrC,MAAQ,EAAGT,KAAKa,IAAIkB,EAAI/B,KAAKyD,eAAeX,OAAOnC,OAAS,EAAGX,KAAKyD,eAAeX,OAAOrC,MAAOT,KAAKyD,eAAeX,OAAOnC,QAIpN,IAFA,IAAI8K,EAAoB,GAEf5P,EAAI,EAAGA,EAAImE,KAAKwL,mBAAmBjQ,KAAKQ,OAAQF,GAAK,EAAG,CAC/D,IAAIoC,EAAI+B,KAAKwL,mBAAmBjQ,KAAKM,GACjC2N,EAAIxJ,KAAKwL,mBAAmBjQ,KAAKM,EAAI,GACrC4N,EAAIzJ,KAAKwL,mBAAmBjQ,KAAKM,EAAI,GACzC4P,EAAkBpP,KAAK,CAAC4B,EAAGuL,EAAGC,IAIhCzJ,KAAKyD,eAAeiG,OACpB1J,KAAKyD,eAAekG,UAAU,EAAG,EAAG3J,KAAKyD,eAAeX,OAAOrC,MAAOT,KAAKyD,eAAeX,OAAOnC,QACjGX,KAAKyD,eAAemG,UAAU5J,KAAKyD,eAAeX,OAAOrC,MAAQ,EAAGT,KAAKyD,eAAeX,OAAOnC,OAAS,GACxGX,KAAKyD,eAAeoG,QAAQ7J,KAAKa,IAAIqB,OACrClC,KAAKyD,eAAemG,WAAW5J,KAAKyD,eAAeX,OAAOrC,MAAQ,GAAIT,KAAKyD,eAAeX,OAAOnC,OAAS,GAE1G,IAAK,IAAIoB,EAAI,EAAGA,EAAI/B,KAAKyD,eAAeX,OAAOnC,OAAQoB,IACrD,IAAK,IAAID,EAAI,EAAGA,EAAI9B,KAAKyD,eAAeX,OAAOrC,MAAOqB,IAAK,CACzD,IAAIgI,EAAa/H,EAAI/B,KAAKyD,eAAeX,OAAOrC,MAAQqB,EACpDiI,EAAQ/J,KAAKgK,SAASyB,EAAkB3B,GAAY,GAAI2B,EAAkB3B,GAAY,GAAI2B,EAAkB3B,GAAY,IAC5H9J,KAAKyD,eAAewG,UAAYF,EAChC/J,KAAKyD,eAAeyG,SAASpI,EAAGC,EAAG,IAAK,KAI5C/B,KAAKyD,eAAe0G,UAEpBnK,KAAK0L,cAAgB1L,KAAKyD,eAAe6F,aAAatJ,KAAKyD,eAAeX,OAAOrC,MAAQ,EAAIT,KAAK2D,OAAOb,OAAOrC,MAAQ,EAAGT,KAAKyD,eAAeX,OAAOnC,OAAS,EAAIX,KAAK2D,OAAOb,OAAOnC,OAAS,EAAGX,KAAK2D,OAAOb,OAAOrC,MAAOT,KAAK2D,OAAOb,OAAOnC,QAC/OX,KAAK2D,OAAO0G,aAAarK,KAAK0L,cAAe,EAAG,GAChD1L,KAAK2L,uBAML,IAJA,IAAIC,EAAS,EACTC,EAAS,EACTC,EAAS,EAEJC,EAAM,EAAGA,EAAM/L,KAAK0L,cAAcnQ,KAAKQ,OAAQgQ,GAAO,EAC7DH,GAAU5L,KAAK0L,cAAcnQ,KAAKwQ,GAClCF,GAAU7L,KAAK0L,cAAcnQ,KAAKwQ,EAAM,GACxCD,GAAU9L,KAAK0L,cAAcnQ,KAAKwQ,EAAM,GAG1CH,EAAS5D,KAAKgE,MAAMJ,GAAU5L,KAAK0L,cAAcnQ,KAAKQ,OAAS,IAC/D8P,EAAS7D,KAAKgE,MAAMH,GAAU7L,KAAK0L,cAAcnQ,KAAKQ,OAAS,IAC/D+P,EAAS9D,KAAKgE,MAAMF,GAAU9L,KAAK0L,cAAcnQ,KAAKQ,OAAS,IAE3D6P,EAASC,EAASC,EAAS,MAC7B7H,QAAQC,IAAI,wBACZlE,KAAKqC,WAAa,KAClBrC,KAAKa,IAAIyB,cAAW2J,EACpBjM,KAAKkM,WACLlM,KAAK6E,UAGT8G,qBAAsB,WAEpB3L,KAAKwB,IAAIkI,OACT1J,KAAKwB,IAAIoI,UAAU5J,KAAKa,IAAIiB,EAAG9B,KAAKa,IAAIkB,GACxC/B,KAAKwB,IAAIqI,OAAO7J,KAAKa,IAAIqB,OACzBlC,KAAKwB,IAAIoI,WAAW5J,KAAKa,IAAIiB,GAAI9B,KAAKa,IAAIkB,GAC1C/B,KAAKwB,IAAI0I,SAASlK,KAAKa,IAAIiB,EAAI9B,KAAKa,IAAIJ,MAAQ,EAAGT,KAAKa,IAAIkB,EAAI/B,KAAKa,IAAI9E,OAAS,EAAGiE,KAAKa,IAAIJ,MAAOT,KAAKa,IAAI9E,QAC9GiE,KAAKwB,IAAI2I,UAETnK,KAAKwB,IAAIkI,OACT1J,KAAKwB,IAAIoI,UAAU5J,KAAKa,IAAIsI,MAAOnJ,KAAKa,IAAIuI,OAC5CpJ,KAAKwB,IAAIqI,OAAO7J,KAAKa,IAAIqB,OACzBlC,KAAKwB,IAAIoI,WAAW5J,KAAKa,IAAIsI,OAAQnJ,KAAKa,IAAIuI,OAC9CpJ,KAAKwB,IAAI2K,YAAc,UACvBnM,KAAKwB,IAAI4K,YACTpM,KAAKwB,IAAI6K,KAAKrM,KAAKa,IAAIsI,MAAQnJ,KAAK6D,QAAQf,OAAOrC,MAAQ,EAAGT,KAAKa,IAAIuI,MAAQpJ,KAAK6D,QAAQf,OAAOnC,OAAS,EAAGX,KAAK6D,QAAQf,OAAOrC,MAAOT,KAAK6D,QAAQf,OAAOnC,QAC9JX,KAAKwB,IAAI8K,SACTtM,KAAKwB,IAAI2I,WAEXoC,eAAgB,SAAwB9O,GACtC,IAAI+O,EAAM/O,EAAEgP,SAAS,IACrB,OAAqB,GAAdD,EAAIzQ,OAAc,IAAMyQ,EAAMA,GAEvCxC,SAAU,SAAkB/L,EAAGuL,EAAGC,GAChC,MAAO,IAAMzJ,KAAKuM,eAAetO,GAAK+B,KAAKuM,eAAe/C,GAAKxJ,KAAKuM,eAAe9C,IAErFoB,aAAc,SAAsB6B,EAAQC,GAI1C,IAFA,IAAIC,EAAgB,GAEX7K,EAAI,EAAGA,EAAI4K,EAAM5K,GAAK,EAC7B,IAAK,IAAID,EAAI,EAAGA,EAAI6K,EAAM7K,GAAK,EAAG,CAMhC,IALA,IAAI+K,EAAe,CAAC9K,EAAI4K,EAAO7K,EAAGC,EAAI4K,EAAO7K,EAAI,GAAIC,EAAI,GAAK4K,EAAO7K,GAAIC,EAAI,GAAK4K,EAAO7K,EAAI,GACzF8J,EAAS,EACTC,EAAS,EACTC,EAAS,EAEJjQ,EAAI,EAAGA,EAAIgR,EAAa9Q,OAAQF,IACvC+P,GAAUc,EAAOG,EAAahR,IAAI,GAClCgQ,GAAUa,EAAOG,EAAahR,IAAI,GAClCiQ,GAAUY,EAAOG,EAAahR,IAAI,GAGpC+P,EAAS5D,KAAKgE,MAAMJ,EAASiB,EAAa9Q,QAC1C8P,EAAS7D,KAAKgE,MAAMH,EAASgB,EAAa9Q,QAC1C+P,EAAS9D,KAAKgE,MAAMF,EAASe,EAAa9Q,QAC1C6Q,EAAcvQ,KAAK,CAACuP,EAAQC,EAAQC,IAIxC,OAAOc,GAETrE,UAAW,WACTvI,KAAKwB,IAAImI,UAAU,EAAG,EAAG3J,KAAKwB,IAAIsB,OAAOrC,MAAOT,KAAKwB,IAAIsB,OAAOnC,QAChEX,KAAKwB,IAAIsL,UAAU9M,KAAKyB,SAAU,EAAG,EAAGzB,KAAKwB,IAAIsB,OAAOrC,MAAOT,KAAKwB,IAAIsB,OAAOnC,SAEjFuL,SAAU,WACRjI,QAAQC,IAAI,aACZlE,KAAKa,IAAIiB,EAAI9B,KAAKU,WAAa,EAAI,KACnCV,KAAKa,IAAIkB,EAAI/B,KAAKY,YAAc,EAChCZ,KAAKa,IAAIqB,MAAQ,KAwBW6K,EAAkC,EAKhEC,GAHuC/P,EAAoB,QAGrCA,EAAoB,SAW1CgQ,EAAYjR,OAAOgR,EAAoB,KAA3BhR,CACd+Q,EACAjN,EACAqB,GACA,EACA,KACA,KACA,MAI+B+L,EAAOD,EAAiB,QAQzDpN,EAAgB,KAAmBsN,OAAOC,eAAgB,EAC1D,IAAIvN,EAAgB,KAAmB,CACrCwN,OAAQ,SAAgBC,GACtB,OAAOA,EAAEJ,MAEVK,OAAO,SAIJC,OACA,SAAUlQ,EAAQsC,EAAqB3C,GAE7C,aACseA,EAAoB,SAOpfwQ,EACA,SAAUnQ,EAAQD,KAMlBqQ,EACA,SAAUpQ,EAAQD,KAMlBsQ,EACA,SAAUrQ,EAAQD,KAMlBuQ,OACA,SAAUtQ,EAAQD,EAASJ\"}","code":"(function(t){function e(e){for(var a,r,h=e[0],c=e[1],o=e[2],l=0,u=[];l<h.length;l++)r=h[l],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(u.length)u.shift()();return n.push.apply(n,o||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],a=!0,h=1;h<i.length;h++){var c=i[h];0!==s[c]&&(a=!1)}a&&(n.splice(e--,1),t=r(r.s=i[0]))}return t}var a={},s={app:0},n=[];function r(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=a,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t[\"default\"]}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"/\";var h=window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[],c=h.push.bind(h);h.push=e,h=h.slice();for(var o=0;o<h.length;o++)e(h[o]);var d=c;n.push([0,\"chunk-vendors\"]),i()})({0:function(t,e,i){t.exports=i(\"56d7\")},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},\"4d75\":function(t,e,i){t.exports=i.p+\"img/world.619126d2.jpg\"},5:function(t,e){},\"56d7\":function(t,e,i){\"use strict\";i.r(e);i(\"e260\"),i(\"e6cf\"),i(\"cca6\"),i(\"a79d\");var a=i(\"2b0e\"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{attrs:{id:\"app\"}},[i(\"div\",{staticClass:\"world\"},[i(\"canvas\",{ref:\"canvas\",attrs:{width:t.worldWidth,height:t.worldHeight}})]),i(\"canvas\",{ref:\"carSnapshotCanvas\",staticClass:\"car-snapshot-canvas\",attrs:{width:1.5*t.car.length,height:1.5*t.car.length}}),i(\"canvas\",{ref:\"viewSnapshotCanvas\",staticClass:\"view-snapshot-canvas\",attrs:{width:1.5*t.viewSize,height:1.5*t.viewSize}}),i(\"canvas\",{ref:\"carCanvas\",staticClass:\"car-canvas\",attrs:{width:t.car.width,height:t.car.length}}),i(\"canvas\",{ref:\"viewCanvas\",staticClass:\"view-canvas\",attrs:{width:t.viewSize,height:t.viewSize}}),i(\"canvas\",{ref:\"viewCanvasReduced\",staticClass:\"view-canvas-reduced\",attrs:{width:t.reducedViewSize,height:t.reducedViewSize}}),i(\"span\",{staticClass:\"fps\"},[t._v(t._s(t.fps)+\" fps\")])])},n=[],r=i(\"2909\"),h=i(\"1da1\"),c=(i(\"fb6a\"),i(\"d3b7\"),i(\"25f0\"),i(\"96cf\"),i(\"ce1a\")),o={name:\"App\",data:function(){return{ctx:null,worldWidth:256,worldHeight:256,imgWorld:null,worldLoaded:!1,fps:null,fpsCounter:null,tick:!0,tickTime:null,car:{width:8,length:16,x:42.624,y:128,speed:1,steeringSpeed:.025,angle:0},viewSize:32,viewReduction:4,viewReducedSize:null,viewPixels:null,steering:null,samples:[],training:!1,model:null}},computed:{reducedViewSize:function(){for(var t=this.viewSize,e=0;e<this.viewReduction;e++)t/=2;return t}},mounted:function(){this.ctx=this.$refs.canvas.getContext(\"2d\"),this.imgWorld=new Image(this.worldWidth,this.worldHeight),this.imgWorld.src=i(\"4d75\");var t=this;this.imgWorld.onload=function(){t.worldLoaded=!0},document.addEventListener(\"keydown\",this.keyDown),document.addEventListener(\"keyup\",this.keyUp),this.ctxViewSnapshot=this.$refs.viewSnapshotCanvas.getContext(\"2d\"),this.ctxCarSnapshot=this.$refs.carSnapshotCanvas.getContext(\"2d\"),this.ctxCar=this.$refs.carCanvas.getContext(\"2d\"),this.ctxView=this.$refs.viewCanvas.getContext(\"2d\"),this.ctxViewReduced=this.$refs.viewCanvasReduced.getContext(\"2d\"),console.log(\"creating model ...\"),this.viewReducedSize=this.viewSize;for(var e=0;e<this.viewReduction;e++)this.viewReducedSize=this.viewReducedSize/2;this.model=c.sequential(),this.model.add(c.layers.dense({inputShape:this.viewReducedSize*this.viewReducedSize+1,activation:\"sigmoid\",units:5})),this.model.add(c.layers.dense({activation:\"relu\",units:10})),this.model.add(c.layers.dense({activation:\"sigmoid\",units:1})),this.model.compile({loss:\"binaryCrossentropy\",optimizer:c.train.rmsprop(.1),metrics:[\"accuracy\"]}),this.refreshLoop()},methods:{train:function(){var t=this;return Object(h[\"a\"])(regeneratorRuntime.mark((function e(){var i,a,s,n,r,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t.training=!0,console.log(\"samples: \"+t.samples.length),i=[],a=[],s=0;s<t.samples.length;s++)n=t.samples[s].state,n.push(t.samples[s].reward),i.push(n),a.push(t.samples[s].action);return r=c.tensor2d(i,[i.length,i[0].length]),h=c.tensor2d(a,[a.length,1]),console.log(\"train model ...\"),e.next=10,t.trainModel(r,h);case 10:t.samples=[],t.training=!1;case 12:case\"end\":return e.stop()}}),e)})))()},trainModel:function(t,e){var i=this;return Object(h[\"a\"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=i.samples.length,a.abrupt(\"return\",i.model.fit(t,e,{epochs:s,callbacks:{onEpochEnd:function(t){console.log(t+\" of \"+s)},onTrainEnd:function(){console.log(\"done\")}}}));case 2:case\"end\":return a.stop()}}),a)})))()},predict:function(t){var e=this;return Object(h[\"a\"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.abrupt(\"return\",c.tidy((function(){var i=c.tensor2d([t],[1,e.viewReducedSize*e.viewReducedSize+1]),a=e.model.predict(i),s=a.dataSync();return s})));case 1:case\"end\":return i.stop()}}),i)})))()},getSteering:function(){var t=this;return Object(h[\"a\"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.predict(t.testingDataInput);case 2:return t.prediction=e.sent,t.prediction=Math.max(0,t.prediction),e.abrupt(\"return\",t.prediction);case 5:case\"end\":return e.stop()}}),e)})))()},refreshLoop:function(){var t=this;window.requestAnimationFrame((function(){var e=performance.now();t.tick?(t.tickTime=e,t.fps=t.fpsCounter,t.fpsCounter=0,t.tick=!1):(t.fpsCounter++,e>=t.tickTime+1e3&&(t.tick=!0)),t.enterFrame(),t.refreshLoop()}))},enterFrame:function(){this.worldLoaded&&!this.training&&(this.drawWorld(),this.getView(),this.moveCar())},moveCar:function(){this.testingDataInput=Object(r[\"a\"])(this.viewPixels),this.testingDataInput.push(1);var t=this;this.getSteering().then((function(e){if(e=Math.min(e,1),e=Math.max(e,0),console.log(\"predicted steering corrected: \"+e),t.samples.length&&t.samples[0].reward<.5){console.log(\"bad reward: \"+t.samples[0].reward);var i=e-1+2*Math.random();i=Math.min(i,1),i=Math.max(i,0),t.car.steering=i,console.log(\"new value: \"+i)}else t.car.steering=e;if(t.car.steering<.5){var a=2*(.5-t.car.steering);t.car.angle-=t.car.steeringSpeed*a}else if(t.car.steering>.5){var s=2*(t.car.steering-.5);t.car.angle+=t.car.steeringSpeed*s}t.car.x+=Math.sin(t.car.angle)*t.car.speed,t.car.y-=Math.cos(t.car.angle)*t.car.speed,t.checkCarCollision()}))},getView:function(){this.car.viewX=this.car.x+Math.sin(this.car.angle)*(this.car.length/2+this.viewSize/2),this.car.viewY=this.car.y-Math.cos(this.car.angle)*(this.car.length/2+this.viewSize/2),this.snapshotWhereViewIs=this.ctx.getImageData(this.car.viewX-this.ctxViewSnapshot.canvas.width/2,this.car.viewY-this.ctxViewSnapshot.canvas.height/2,this.ctxViewSnapshot.canvas.width,this.ctxViewSnapshot.canvas.height);for(var t=[],e=0;e<this.snapshotWhereViewIs.data.length;e+=4){var i=this.snapshotWhereViewIs.data[e],a=this.snapshotWhereViewIs.data[e+1],s=this.snapshotWhereViewIs.data[e+2];t.push([i,a,s])}this.ctxViewSnapshot.save(),this.ctxViewSnapshot.clearRect(0,0,this.ctxViewSnapshot.canvas.width,this.ctxViewSnapshot.canvas.height),this.ctxViewSnapshot.translate(this.ctxViewSnapshot.canvas.width/2,this.ctxViewSnapshot.canvas.height/2),this.ctxViewSnapshot.rotate(-this.car.angle),this.ctxViewSnapshot.translate(-this.ctxViewSnapshot.canvas.width/2,-this.ctxViewSnapshot.canvas.height/2);for(var n=0;n<this.ctxViewSnapshot.canvas.height;n++)for(var r=0;r<this.ctxViewSnapshot.canvas.width;r++){var h=n*this.ctxViewSnapshot.canvas.width+r,c=this.rgbToHex(t[h][0],t[h][1],t[h][2]);this.ctxViewSnapshot.fillStyle=c,this.ctxViewSnapshot.fillRect(r,n,1.5,1.5)}this.ctxViewSnapshot.restore(),this.imgWhereViewIs=this.ctxViewSnapshot.getImageData(this.ctxViewSnapshot.canvas.width/2-this.ctxView.canvas.width/2,this.ctxViewSnapshot.canvas.height/2-this.ctxView.canvas.height/2,this.ctxView.canvas.width,this.ctxView.canvas.height),this.ctxView.putImageData(this.imgWhereViewIs,0,0);for(var o=[],d=0;d<this.imgWhereViewIs.data.length;d+=4){var l=this.imgWhereViewIs.data[d],u=this.imgWhereViewIs.data[d+1],p=this.imgWhereViewIs.data[d+2];o.push([l,u,p])}for(var v,w=o,g=0;g<this.viewReduction;g++)w=this.reducePixels(w,Math.sqrt(w.length));for(var x=0;x<this.ctxViewReduced.canvas.height;x++)for(var f=0;f<this.ctxViewReduced.canvas.width;f++){var m=x*this.ctxViewReduced.canvas.width+f,S=this.rgbToHex(w[m][0],w[m][1],w[m][2]);this.ctxViewReduced.fillStyle=S,this.ctxViewReduced.fillRect(f,x,1.5,1.5)}this.viewPixels&&(this.samples.unshift({state:this.viewPixels,action:this.car.steering}),this.samples=this.samples.slice(0,1024),v=this.totalBrightness),this.viewPixels=[],this.totalBrightness=0;for(var C=0;C<w.length;C++){var V=(w[C][0]+w[C][1]+w[C][2])/765;this.viewPixels.push(V),this.totalBrightness+=V}if(this.totalBrightness=this.totalBrightness/this.viewPixels.length,this.samples.length){var y,b=this.totalBrightness-v;y=b>0?1:0,this.samples[0].reward=y}},checkCarCollision:function(){this.snapshotWhereCarIs=this.ctx.getImageData(this.car.x-this.ctxCarSnapshot.canvas.width/2,this.car.y-this.ctxCarSnapshot.canvas.height/2,this.ctxCarSnapshot.canvas.width,this.ctxCarSnapshot.canvas.height);for(var t=[],e=0;e<this.snapshotWhereCarIs.data.length;e+=4){var i=this.snapshotWhereCarIs.data[e],a=this.snapshotWhereCarIs.data[e+1],s=this.snapshotWhereCarIs.data[e+2];t.push([i,a,s])}this.ctxCarSnapshot.save(),this.ctxCarSnapshot.clearRect(0,0,this.ctxCarSnapshot.canvas.width,this.ctxCarSnapshot.canvas.height),this.ctxCarSnapshot.translate(this.ctxCarSnapshot.canvas.width/2,this.ctxCarSnapshot.canvas.height/2),this.ctxCarSnapshot.rotate(-this.car.angle),this.ctxCarSnapshot.translate(-this.ctxCarSnapshot.canvas.width/2,-this.ctxCarSnapshot.canvas.height/2);for(var n=0;n<this.ctxCarSnapshot.canvas.height;n++)for(var r=0;r<this.ctxCarSnapshot.canvas.width;r++){var h=n*this.ctxCarSnapshot.canvas.width+r,c=this.rgbToHex(t[h][0],t[h][1],t[h][2]);this.ctxCarSnapshot.fillStyle=c,this.ctxCarSnapshot.fillRect(r,n,1.5,1.5)}this.ctxCarSnapshot.restore(),this.imgWhereCarIs=this.ctxCarSnapshot.getImageData(this.ctxCarSnapshot.canvas.width/2-this.ctxCar.canvas.width/2,this.ctxCarSnapshot.canvas.height/2-this.ctxCar.canvas.height/2,this.ctxCar.canvas.width,this.ctxCar.canvas.height),this.ctxCar.putImageData(this.imgWhereCarIs,0,0),this.drawCarAndViewSquare();for(var o=0,d=0,l=0,u=0;u<this.imgWhereCarIs.data.length;u+=4)o+=this.imgWhereCarIs.data[u],d+=this.imgWhereCarIs.data[u+1],l+=this.imgWhereCarIs.data[u+2];o=Math.round(o/(this.imgWhereCarIs.data.length/4)),d=Math.round(d/(this.imgWhereCarIs.data.length/4)),l=Math.round(l/(this.imgWhereCarIs.data.length/4)),o+d+l<760&&(console.log(\"collision! ... train\"),this.viewPixels=null,this.car.steering=void 0,this.resetCar(),this.train())},drawCarAndViewSquare:function(){this.ctx.save(),this.ctx.translate(this.car.x,this.car.y),this.ctx.rotate(this.car.angle),this.ctx.translate(-this.car.x,-this.car.y),this.ctx.fillRect(this.car.x-this.car.width/2,this.car.y-this.car.length/2,this.car.width,this.car.length),this.ctx.restore(),this.ctx.save(),this.ctx.translate(this.car.viewX,this.car.viewY),this.ctx.rotate(this.car.angle),this.ctx.translate(-this.car.viewX,-this.car.viewY),this.ctx.strokeStyle=\"#ff0000\",this.ctx.beginPath(),this.ctx.rect(this.car.viewX-this.ctxView.canvas.width/2,this.car.viewY-this.ctxView.canvas.height/2,this.ctxView.canvas.width,this.ctxView.canvas.height),this.ctx.stroke(),this.ctx.restore()},componentToHex:function(t){var e=t.toString(16);return 1==e.length?\"0\"+e:e},rgbToHex:function(t,e,i){return\"#\"+this.componentToHex(t)+this.componentToHex(e)+this.componentToHex(i)},reducePixels:function(t,e){for(var i=[],a=0;a<e;a+=2)for(var s=0;s<e;s+=2){for(var n=[a*e+s,a*e+s+1,(a+1)*e+s,(a+1)*e+s+1],r=0,h=0,c=0,o=0;o<n.length;o++)r+=t[n[o]][0],h+=t[n[o]][1],c+=t[n[o]][2];r=Math.round(r/n.length),h=Math.round(h/n.length),c=Math.round(c/n.length),i.push([r,h,c])}return i},drawWorld:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.drawImage(this.imgWorld,0,0,this.ctx.canvas.width,this.ctx.canvas.height)},resetCar:function(){console.log(\"reset car\"),this.car.x=this.worldWidth/2*.333,this.car.y=this.worldHeight/2,this.car.angle=0}}},d=o,l=(i(\"5c0b\"),i(\"2877\")),u=Object(l[\"a\"])(d,s,n,!1,null,null,null),p=u.exports;a[\"a\"].config.productionTip=!1,new a[\"a\"]({render:function(t){return t(p)}}).$mount(\"#app\")},\"5c0b\":function(t,e,i){\"use strict\";i(\"9c0c\")},6:function(t,e){},7:function(t,e){},8:function(t,e){},\"9c0c\":function(t,e,i){}});","extractedComments":[]}