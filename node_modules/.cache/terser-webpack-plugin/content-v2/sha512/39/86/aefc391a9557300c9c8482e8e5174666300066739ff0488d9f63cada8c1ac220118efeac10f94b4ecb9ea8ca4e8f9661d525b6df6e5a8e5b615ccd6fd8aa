{"map":"{\"version\":3,\"sources\":[\"js/app.4c4289e5.js\"],\"names\":[\"modules\",\"webpackJsonpCallback\",\"data\",\"moduleId\",\"chunkId\",\"chunkIds\",\"moreModules\",\"executeModules\",\"i\",\"resolves\",\"length\",\"Object\",\"prototype\",\"hasOwnProperty\",\"call\",\"installedChunks\",\"push\",\"parentJsonpFunction\",\"shift\",\"deferredModules\",\"apply\",\"checkDeferredModules\",\"result\",\"deferredModule\",\"fulfilled\",\"j\",\"depId\",\"splice\",\"__webpack_require__\",\"s\",\"installedModules\",\"app\",\"exports\",\"module\",\"l\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"p\",\"jsonpArray\",\"window\",\"oldJsonpFunction\",\"slice\",\"0\",\"1\",\"2\",\"3\",\"4\",\"4d75\",\"5\",\"56d7\",\"__webpack_exports__\",\"vue_runtime_esm\",\"Appvue_type_template_id_37028588_render\",\"_vm\",\"this\",\"_h\",\"$createElement\",\"_c\",\"_self\",\"attrs\",\"id\",\"staticClass\",\"ref\",\"width\",\"worldWidth\",\"height\",\"worldHeight\",\"_v\",\"_s\",\"trainingProgress\",\"_e\",\"car\",\"viewSize\",\"reducedViewSize\",\"fps\",\"staticRenderFns\",\"toConsumableArray\",\"asyncToGenerator\",\"tf\",\"Appvue_type_script_lang_js_\",\"ctx\",\"imgWorld\",\"worldLoaded\",\"fpsCounter\",\"tick\",\"tickTime\",\"x\",\"y\",\"speed\",\"steeringSpeed\",\"angle\",\"viewReduction\",\"viewReducedSize\",\"viewPixels\",\"steering\",\"samples\",\"samplesMaxLength\",\"score\",\"highscore\",\"training\",\"model\",\"computed\",\"reducedSize\",\"mounted\",\"$refs\",\"canvas\",\"getContext\",\"Image\",\"src\",\"onload\",\"document\",\"addEventListener\",\"keyDown\",\"keyUp\",\"ctxViewSnapshot\",\"viewSnapshotCanvas\",\"ctxCarSnapshot\",\"carSnapshotCanvas\",\"ctxCar\",\"carCanvas\",\"ctxView\",\"viewCanvas\",\"ctxViewReduced\",\"viewCanvasReduced\",\"console\",\"log\",\"sequential\",\"add\",\"layers\",\"dense\",\"inputShape\",\"activation\",\"units\",\"compile\",\"loss\",\"optimizer\",\"train\",\"rmsprop\",\"metrics\",\"refreshLoop\",\"methods\",\"_this\",\"regeneratorRuntime\",\"mark\",\"_callee\",\"featureValuesTraining\",\"labelValuesTraining\",\"featureValueTraining\",\"featureTensorTraining\",\"labelTensorTraining\",\"wrap\",\"_context\",\"prev\",\"next\",\"state\",\"reward\",\"action\",\"tensor2d\",\"trainModel\",\"stop\",\"epochs\",\"_this2\",\"_callee2\",\"_context2\",\"abrupt\",\"fit\",\"callbacks\",\"onEpochEnd\",\"epoch\",\"Math\",\"round\",\"onTrainEnd\",\"predict\",\"input\",\"_this3\",\"_callee3\",\"_context3\",\"tidy\",\"inputTensor\",\"outputTensor\",\"outputValue\",\"dataSync\",\"getSteering\",\"_this4\",\"_callee4\",\"_context4\",\"testingDataInput\",\"prediction\",\"sent\",\"max\",\"_this5\",\"requestAnimationFrame\",\"now\",\"performance\",\"enterFrame\",\"drawWorld\",\"getView\",\"moveCar\",\"then\",\"min\",\"randomisedValue\",\"random\",\"steeringStrength\",\"_steeringStrength\",\"sin\",\"cos\",\"checkCarCollision\",\"viewX\",\"viewY\",\"snapshotWhereViewIs\",\"getImageData\",\"viewSnapshotPixels\",\"g\",\"b\",\"save\",\"clearRect\",\"translate\",\"rotate\",\"pixelIndex\",\"color\",\"rgbToHex\",\"fillStyle\",\"fillRect\",\"restore\",\"imgWhereViewIs\",\"putImageData\",\"_i\",\"_r\",\"_g\",\"_b\",\"previousTotalBrightness\",\"viewPixelsReduced\",\"_i2\",\"reducePixels\",\"sqrt\",\"_y\",\"_x\",\"_pixelIndex\",\"_color\",\"unshift\",\"totalBrightness\",\"_i3\",\"brightness\",\"brightnessChange\",\"snapshotWhereCarIs\",\"carSnapshotPixels\",\"imgWhereCarIs\",\"drawCarAndViewSquare\",\"totalR\",\"totalG\",\"totalB\",\"_i4\",\"undefined\",\"resetCar\",\"strokeStyle\",\"beginPath\",\"rect\",\"stroke\",\"componentToHex\",\"hex\",\"toString\",\"pixels\",\"size\",\"pixelsReduced\",\"pixelIndexes\",\"drawImage\",\"src_Appvue_type_script_lang_js_\",\"componentNormalizer\",\"component\",\"App\",\"config\",\"productionTip\",\"render\",\"h\",\"$mount\",\"5c0b\",\"6\",\"7\",\"8\",\"9c0c\"],\"mappings\":\"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\"}","code":"(function(t){function e(e){for(var a,r,h=e[0],c=e[1],o=e[2],l=0,u=[];l<h.length;l++)r=h[l],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(u.length)u.shift()();return n.push.apply(n,o||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],a=!0,h=1;h<i.length;h++){var c=i[h];0!==s[c]&&(a=!1)}a&&(n.splice(e--,1),t=r(r.s=i[0]))}return t}var a={},s={app:0},n=[];function r(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=a,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t[\"default\"]}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"/selfdriving/\";var h=window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[],c=h.push.bind(h);h.push=e,h=h.slice();for(var o=0;o<h.length;o++)e(h[o]);var d=c;n.push([0,\"chunk-vendors\"]),i()})({0:function(t,e,i){t.exports=i(\"56d7\")},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},\"4d75\":function(t,e,i){t.exports=i.p+\"img/world.619126d2.jpg\"},5:function(t,e){},\"56d7\":function(t,e,i){\"use strict\";i.r(e);i(\"e260\"),i(\"e6cf\"),i(\"cca6\"),i(\"a79d\");var a=i(\"2b0e\"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{attrs:{id:\"app\"}},[i(\"div\",{staticClass:\"world\"},[i(\"canvas\",{ref:\"canvas\",attrs:{width:t.worldWidth,height:t.worldHeight}}),t.training?i(\"div\",{staticClass:\"training\"},[i(\"span\",[t._v(\"training\"),i(\"br\"),t._v(t._s(t.trainingProgress)+\"%\")])]):t._e()]),i(\"canvas\",{ref:\"carSnapshotCanvas\",staticClass:\"car-snapshot-canvas\",attrs:{width:1.5*t.car.length,height:1.5*t.car.length}}),i(\"canvas\",{ref:\"viewSnapshotCanvas\",staticClass:\"view-snapshot-canvas\",attrs:{width:1.5*t.viewSize,height:1.5*t.viewSize}}),i(\"canvas\",{ref:\"carCanvas\",staticClass:\"car-canvas\",attrs:{width:t.car.width,height:t.car.length}}),i(\"canvas\",{ref:\"viewCanvas\",staticClass:\"view-canvas\",attrs:{width:t.viewSize,height:t.viewSize}}),i(\"canvas\",{ref:\"viewCanvasReduced\",staticClass:\"view-canvas-reduced\",attrs:{width:t.reducedViewSize,height:t.reducedViewSize}}),i(\"span\",{staticClass:\"fps\"},[t._v(t._s(t.fps)+\" fps\")])])},n=[],r=i(\"2909\"),h=i(\"1da1\"),c=(i(\"fb6a\"),i(\"d3b7\"),i(\"25f0\"),i(\"96cf\"),i(\"ce1a\")),o={name:\"App\",data:function(){return{ctx:null,worldWidth:256,worldHeight:256,imgWorld:null,worldLoaded:!1,fps:null,fpsCounter:null,tick:!0,tickTime:null,car:{width:8,length:16,x:42.624,y:128,speed:1,steeringSpeed:.025,angle:0},viewSize:32,viewReduction:4,viewReducedSize:null,viewPixels:null,steering:null,samples:[],samplesMaxLength:512,score:0,highscore:0,training:!1,trainingProgress:0,model:null}},computed:{reducedViewSize:function(){for(var t=this.viewSize,e=0;e<this.viewReduction;e++)t/=2;return t}},mounted:function(){this.ctx=this.$refs.canvas.getContext(\"2d\"),this.imgWorld=new Image(this.worldWidth,this.worldHeight),this.imgWorld.src=i(\"4d75\");var t=this;this.imgWorld.onload=function(){t.worldLoaded=!0},document.addEventListener(\"keydown\",this.keyDown),document.addEventListener(\"keyup\",this.keyUp),this.ctxViewSnapshot=this.$refs.viewSnapshotCanvas.getContext(\"2d\"),this.ctxCarSnapshot=this.$refs.carSnapshotCanvas.getContext(\"2d\"),this.ctxCar=this.$refs.carCanvas.getContext(\"2d\"),this.ctxView=this.$refs.viewCanvas.getContext(\"2d\"),this.ctxViewReduced=this.$refs.viewCanvasReduced.getContext(\"2d\"),console.log(\"creating model ...\"),this.viewReducedSize=this.viewSize;for(var e=0;e<this.viewReduction;e++)this.viewReducedSize=this.viewReducedSize/2;this.model=c.sequential(),this.model.add(c.layers.dense({inputShape:this.viewReducedSize*this.viewReducedSize+1,activation:\"sigmoid\",units:5})),this.model.add(c.layers.dense({activation:\"relu\",units:10})),this.model.add(c.layers.dense({activation:\"sigmoid\",units:1})),this.model.compile({loss:\"binaryCrossentropy\",optimizer:c.train.rmsprop(.1),metrics:[\"accuracy\"]}),this.refreshLoop()},methods:{train:function(){var t=this;return Object(h[\"a\"])(regeneratorRuntime.mark((function e(){var i,a,s,n,r,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t.training=!0,console.log(\"samples: \"+t.samples.length),i=[],a=[],s=0;s<t.samples.length;s++)n=t.samples[s].state,n.push(t.samples[s].reward),i.push(n),a.push(t.samples[s].action);return r=c.tensor2d(i,[i.length,i[0].length]),h=c.tensor2d(a,[a.length,1]),console.log(\"train model ...\"),e.next=10,t.trainModel(r,h,t.samples.length);case 10:t.training=!1,t.trainingProgress=0;case 12:case\"end\":return e.stop()}}),e)})))()},trainModel:function(t,e,i){var a=this;return Object(h[\"a\"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=a,s.abrupt(\"return\",a.model.fit(t,e,{epochs:i,callbacks:{onEpochEnd:function(t){n.trainingProgress=Math.round(t/i*100)},onTrainEnd:function(){console.log(\"done\")}}}));case 2:case\"end\":return s.stop()}}),s)})))()},predict:function(t){var e=this;return Object(h[\"a\"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.abrupt(\"return\",c.tidy((function(){var i=c.tensor2d([t],[1,e.viewReducedSize*e.viewReducedSize+1]),a=e.model.predict(i),s=a.dataSync();return s})));case 1:case\"end\":return i.stop()}}),i)})))()},getSteering:function(){var t=this;return Object(h[\"a\"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.predict(t.testingDataInput);case 2:return t.prediction=e.sent,t.prediction=Math.max(0,t.prediction),e.abrupt(\"return\",t.prediction);case 5:case\"end\":return e.stop()}}),e)})))()},refreshLoop:function(){var t=this;window.requestAnimationFrame((function(){var e=performance.now();t.tick?(t.tickTime=e,t.fps=t.fpsCounter,t.fpsCounter=0,t.tick=!1):(t.fpsCounter++,e>=t.tickTime+1e3&&(t.tick=!0)),t.enterFrame(),t.refreshLoop()}))},enterFrame:function(){this.worldLoaded&&!this.training&&(this.drawWorld(),this.getView(),this.moveCar())},moveCar:function(){this.testingDataInput=Object(r[\"a\"])(this.viewPixels),this.testingDataInput.push(1);var t=this;this.getSteering().then((function(e){e=Math.min(e,1),e=Math.max(e,0),console.log(\"predicted steering value: \"+e);var i=e-.25+.5*Math.random();if(i=Math.min(i,1),i=Math.max(i,0),t.car.steering=i,console.log(\"new value: \"+i),t.car.steering<.5){var a=2*(.5-t.car.steering);t.car.angle-=t.car.steeringSpeed*a}else if(t.car.steering>.5){var s=2*(t.car.steering-.5);t.car.angle+=t.car.steeringSpeed*s}t.car.x+=Math.sin(t.car.angle)*t.car.speed,t.car.y-=Math.cos(t.car.angle)*t.car.speed,t.checkCarCollision()}))},getView:function(){this.car.viewX=this.car.x+Math.sin(this.car.angle)*(this.car.length/2+this.viewSize/2),this.car.viewY=this.car.y-Math.cos(this.car.angle)*(this.car.length/2+this.viewSize/2),this.snapshotWhereViewIs=this.ctx.getImageData(this.car.viewX-this.ctxViewSnapshot.canvas.width/2,this.car.viewY-this.ctxViewSnapshot.canvas.height/2,this.ctxViewSnapshot.canvas.width,this.ctxViewSnapshot.canvas.height);for(var t=[],e=0;e<this.snapshotWhereViewIs.data.length;e+=4){var i=this.snapshotWhereViewIs.data[e],a=this.snapshotWhereViewIs.data[e+1],s=this.snapshotWhereViewIs.data[e+2];t.push([i,a,s])}this.ctxViewSnapshot.save(),this.ctxViewSnapshot.clearRect(0,0,this.ctxViewSnapshot.canvas.width,this.ctxViewSnapshot.canvas.height),this.ctxViewSnapshot.translate(this.ctxViewSnapshot.canvas.width/2,this.ctxViewSnapshot.canvas.height/2),this.ctxViewSnapshot.rotate(-this.car.angle),this.ctxViewSnapshot.translate(-this.ctxViewSnapshot.canvas.width/2,-this.ctxViewSnapshot.canvas.height/2);for(var n=0;n<this.ctxViewSnapshot.canvas.height;n++)for(var r=0;r<this.ctxViewSnapshot.canvas.width;r++){var h=n*this.ctxViewSnapshot.canvas.width+r,c=this.rgbToHex(t[h][0],t[h][1],t[h][2]);this.ctxViewSnapshot.fillStyle=c,this.ctxViewSnapshot.fillRect(r,n,1.5,1.5)}this.ctxViewSnapshot.restore(),this.imgWhereViewIs=this.ctxViewSnapshot.getImageData(this.ctxViewSnapshot.canvas.width/2-this.ctxView.canvas.width/2,this.ctxViewSnapshot.canvas.height/2-this.ctxView.canvas.height/2,this.ctxView.canvas.width,this.ctxView.canvas.height),this.ctxView.putImageData(this.imgWhereViewIs,0,0);for(var o=[],d=0;d<this.imgWhereViewIs.data.length;d+=4){var l=this.imgWhereViewIs.data[d],u=this.imgWhereViewIs.data[d+1],p=this.imgWhereViewIs.data[d+2];o.push([l,u,p])}for(var v,g=o,w=0;w<this.viewReduction;w++)g=this.reducePixels(g,Math.sqrt(g.length));for(var x=0;x<this.ctxViewReduced.canvas.height;x++)for(var f=0;f<this.ctxViewReduced.canvas.width;f++){var m=x*this.ctxViewReduced.canvas.width+f,S=this.rgbToHex(g[m][0],g[m][1],g[m][2]);this.ctxViewReduced.fillStyle=S,this.ctxViewReduced.fillRect(f,x,1.5,1.5)}this.viewPixels&&(this.samples.unshift({state:this.viewPixels,action:this.car.steering}),this.samples=this.samples.slice(0,this.samplesMaxLength),v=this.totalBrightness),this.viewPixels=[],this.totalBrightness=0;for(var C=0;C<g.length;C++){var V=(g[C][0]+g[C][1]+g[C][2])/765;this.viewPixels.push(V),this.totalBrightness+=V}if(this.totalBrightness=this.totalBrightness/this.viewPixels.length,this.samples.length){var y,b=this.totalBrightness-v;y=b>0?1:0,this.samples[0].reward=y}},checkCarCollision:function(){this.snapshotWhereCarIs=this.ctx.getImageData(this.car.x-this.ctxCarSnapshot.canvas.width/2,this.car.y-this.ctxCarSnapshot.canvas.height/2,this.ctxCarSnapshot.canvas.width,this.ctxCarSnapshot.canvas.height);for(var t=[],e=0;e<this.snapshotWhereCarIs.data.length;e+=4){var i=this.snapshotWhereCarIs.data[e],a=this.snapshotWhereCarIs.data[e+1],s=this.snapshotWhereCarIs.data[e+2];t.push([i,a,s])}this.ctxCarSnapshot.save(),this.ctxCarSnapshot.clearRect(0,0,this.ctxCarSnapshot.canvas.width,this.ctxCarSnapshot.canvas.height),this.ctxCarSnapshot.translate(this.ctxCarSnapshot.canvas.width/2,this.ctxCarSnapshot.canvas.height/2),this.ctxCarSnapshot.rotate(-this.car.angle),this.ctxCarSnapshot.translate(-this.ctxCarSnapshot.canvas.width/2,-this.ctxCarSnapshot.canvas.height/2);for(var n=0;n<this.ctxCarSnapshot.canvas.height;n++)for(var r=0;r<this.ctxCarSnapshot.canvas.width;r++){var h=n*this.ctxCarSnapshot.canvas.width+r,c=this.rgbToHex(t[h][0],t[h][1],t[h][2]);this.ctxCarSnapshot.fillStyle=c,this.ctxCarSnapshot.fillRect(r,n,1.5,1.5)}this.ctxCarSnapshot.restore(),this.imgWhereCarIs=this.ctxCarSnapshot.getImageData(this.ctxCarSnapshot.canvas.width/2-this.ctxCar.canvas.width/2,this.ctxCarSnapshot.canvas.height/2-this.ctxCar.canvas.height/2,this.ctxCar.canvas.width,this.ctxCar.canvas.height),this.ctxCar.putImageData(this.imgWhereCarIs,0,0),this.drawCarAndViewSquare();for(var o=0,d=0,l=0,u=0;u<this.imgWhereCarIs.data.length;u+=4)o+=this.imgWhereCarIs.data[u],d+=this.imgWhereCarIs.data[u+1],l+=this.imgWhereCarIs.data[u+2];o=Math.round(o/(this.imgWhereCarIs.data.length/4)),d=Math.round(d/(this.imgWhereCarIs.data.length/4)),l=Math.round(l/(this.imgWhereCarIs.data.length/4)),o+d+l<760?(console.log(\"collision!\"),this.viewPixels=null,this.car.steering=void 0,this.resetCar(),this.score>this.highscore&&(console.log(\"new highscore, train ...\"),this.highscore=this.score),this.train(),this.samples=[],this.score=0):this.score++},drawCarAndViewSquare:function(){this.ctx.save(),this.ctx.translate(this.car.x,this.car.y),this.ctx.rotate(this.car.angle),this.ctx.translate(-this.car.x,-this.car.y),this.ctx.fillRect(this.car.x-this.car.width/2,this.car.y-this.car.length/2,this.car.width,this.car.length),this.ctx.restore(),this.ctx.save(),this.ctx.translate(this.car.viewX,this.car.viewY),this.ctx.rotate(this.car.angle),this.ctx.translate(-this.car.viewX,-this.car.viewY),this.ctx.strokeStyle=\"#ff0000\",this.ctx.beginPath(),this.ctx.rect(this.car.viewX-this.ctxView.canvas.width/2,this.car.viewY-this.ctxView.canvas.height/2,this.ctxView.canvas.width,this.ctxView.canvas.height),this.ctx.stroke(),this.ctx.restore()},componentToHex:function(t){var e=t.toString(16);return 1==e.length?\"0\"+e:e},rgbToHex:function(t,e,i){return\"#\"+this.componentToHex(t)+this.componentToHex(e)+this.componentToHex(i)},reducePixels:function(t,e){for(var i=[],a=0;a<e;a+=2)for(var s=0;s<e;s+=2){for(var n=[a*e+s,a*e+s+1,(a+1)*e+s,(a+1)*e+s+1],r=0,h=0,c=0,o=0;o<n.length;o++)r+=t[n[o]][0],h+=t[n[o]][1],c+=t[n[o]][2];r=Math.round(r/n.length),h=Math.round(h/n.length),c=Math.round(c/n.length),i.push([r,h,c])}return i},drawWorld:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.drawImage(this.imgWorld,0,0,this.ctx.canvas.width,this.ctx.canvas.height)},resetCar:function(){console.log(\"reset car\"),this.car.x=this.worldWidth/2*.333,this.car.y=this.worldHeight/2,this.car.angle=0}}},d=o,l=(i(\"5c0b\"),i(\"2877\")),u=Object(l[\"a\"])(d,s,n,!1,null,null,null),p=u.exports;a[\"a\"].config.productionTip=!1,new a[\"a\"]({render:function(t){return t(p)}}).$mount(\"#app\")},\"5c0b\":function(t,e,i){\"use strict\";i(\"9c0c\")},6:function(t,e){},7:function(t,e){},8:function(t,e){},\"9c0c\":function(t,e,i){}});","extractedComments":[]}